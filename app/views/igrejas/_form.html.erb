<%= form_for @igreja, :html => {:class => "form-horizontal"}, name: :form1  do |f|  %>

    <% if @igreja.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@igreja.errors.count, "error") %> não pode ser salvo, contato o suporte!</h2>
          <ul>
            <% @igreja.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
          </ul>
        </div>
    <% end %>

    <div class="form-title">
      Informações
    </div>

    <div class="form-group">
         <label class="col-lg-1 control-label">Descrição</label>
         <div class="col-lg-11">
          <%= f.text_field  :descricao, class: 'form-control', placeholder: 'Descrição'  %>
         </div>
    </div>

    <div class="form-group">
      <label class="col-lg-1 control-label">Responsável</label>
      <div class="col-lg-11">
        <%=  f.collection_select(:responsavel_id,  @resonsaveis , :id, :pessoa, { :prompt => true  } )    %>
      </div>
    </div>

    <% @igreja.igreja_enderecos.each do |ie| %>

        <%= f.fields_for :igreja_enderecos, ie do |ief| %>

            <%= ief.hidden_field :id %>
            <%= ief.hidden_field :descricao %>
            <div class="form-title">
              Endereço <%= ie.descricao %>
            </div>

            <%= ief.fields_for :endereco do |edf| %>

                <%= edf.hidden_field :id %>

                <div class="form-group">
                  <label class="col-lg-1 control-label">Logradouro</label>
                  <div class="col-lg-11">
                    <%= edf.text_field  :logradouro, class: 'form-control', placeholder: 'Logradouro'  %>
                  </div>
                </div>

                <div class="form-group">
                  <label class="col-lg-1 control-label">Número</label>
                  <div class="col-lg-11">
                    <%= edf.text_field  :numero, class: 'form-control', placeholder: 'Número'  %>
                  </div>
                </div>

                <div class="form-group">
                  <label class="col-lg-1 control-label">Estado</label>
                  <div class="col-lg-11">
                    <%= edf.select :estado_id, options_for_select(@estados.collect { |country|
                      [country.nome.titleize, country.id] }, 1), {}, { id: 'estados_select' } %>
                  </div>
                </div>

                <div class="form-group">
                  <label class="col-lg-1 control-label">Cidade</label>
                  <div class="col-lg-11">
                    <%= edf.select :cidade_id, options_for_select(@cidades.collect { |city|
                      [city.nome.titleize, city.id] }, 0), {}, { id: 'cidades_select' } %>
                  </div>
                </div>

                <%= edf.fields_for :bairro do |bf| %>
                    <div class="form-group">
                      <label class="col-lg-1 control-label">Bairro</label>
                      <div class="col-lg-11">
                        <%= bf.text_field :nome, class: 'form-control', placeholder: 'Bairro'  %>
                      </div>
                    </div>
                <% end %>

                <div class="form-group">
                  <label class="col-lg-1 control-label">Complemento</label>
                  <div class="col-lg-11">
                    <%= edf.text_field :complemento, class: 'form-control', placeholder: 'Complemento'  %>
                  </div>
                </div>

                <div class="form-group">
                  <label class="col-lg-1 control-label">Cep</label>
                  <div class="col-lg-11">
                    <%= edf.text_field  :cep, class: 'form-control', placeholder: 'Cep'  %>
                  </div>
                </div>

                <div class="form-group">
                  <label class="col-lg-1 control-label">Ponto de Referência</label>
                  <div class="col-lg-11">
                    <%= edf.text_field :ponto_referencia, class: 'form-control', placeholder: 'Ponto de Referência'  %>
                  </div>
                </div>

            <% end %>

        <% end %>

    <% end %>

    <div class="form-title">
      Contatos
    </div>
    <div class="form-group">
      <% @igreja.contatos.each do |ct| %>
          <%= f.fields_for :contatos, ct do |ctt| %>
              <%= ctt.hidden_field :id %>
              <%= ctt.hidden_field :tipo %>
              <%= ctt.label :descricao, ct.tipo.titleize, class: 'col-md-1 control-label no-padding-right' %>
              <div class="col-md-5">
                <%= ctt.text_field :descricao, class: 'form-control' %>
              </div>
          <% end %>
      <% end %>
    </div>

    <%= link_to 'Listar', igrejas_path, class: 'btn btn-blue' %>

    <%= f.submit class: 'btn btn-blue' %>


<% end %>

